@model System.Collections.Generic.List<LiteDispatch.Web.Models.DispatchModel>

@{
    ViewBag.Title = "Haulier - Active Dispatch Notes";    
}
@section featured {
    <section class="featured">
        <div class="content-wrapper">
            <div id="detail_up" class="float-right"><img src="~/Images/deploy_chevronup.gif"/></div>
            <div id="detail_down" class="float-right"><img src="~/Images/deploy_chevrondown.gif"/></div>
            <hgroup class="title">
                <h1>@ViewBag.Title</h1>                
                <br/>
                <h2>@ViewBag.Message</h2>                
            </hgroup>
            <div id="featured_detail">
                <p>
                    <h5>Design Notes</h5>
                    This page display active dispatch notes for a determined haulier<br/>
                    <h5>Comments</h5>
                    Currently this page displays all active dispatches for all hauliers
                </p>
            </div>
        </div>
    </section>
}

@if (Model.Any())
{
    <table id="listados">
        <thead>
            <th>Haulier</th>
            <th>Date</th>
            <th>Reference</th>
            <th>Truck</th>
            <th>State</th>
            <th>Creation Date</th>
            <th>Lines</th>
            <th></th>
        </thead>
        @foreach (var listado in Model)
        {
            <tr>
                <td>@listado.Transportista</td>
                <td>@string.Format("{0:d}", listado.DispatchDate)</td>
                <td>@listado.DispatchReference</td>
                <td>@listado.TruckReg</td>
                <td>@listado.State</td>
                <td>@listado.CreationDate</td>
                <td>@listado.Lines.Count</td>
                <td>@Html.ActionLink("detail", "DisplayDispatch", new { listadoGuid = listado.Guid })</td>
                <td>@Html.ActionLink("print", "PrintDispatch", new { listadoGuid = listado.Guid }, new { target = "_blank"})</td>
            </tr>
        }
    </table>
}
else
{
    <p>No active dispatch notes are available</p>
}
@section scripts
{
    <script type="text/javascript">
        $(document).ready(function () {
            $("#listados > tbody tr:odd").css("background-color", "#F7F7F7");
            $("#listados > thead th").css("padding-right", "20px"); // ToDo: Use CSS to do this
        });
    </script>
    <script src="~/Scripts/feature-detail.js" type="text/javascript"></script>
}